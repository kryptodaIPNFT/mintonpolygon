{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\hndls\\\\matic-nft-tutorial\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import{Card}from\"antd\";import React,{useMemo,useState}from\"react\";import{useContractExistsAtAddress,useContractLoader}from\"../../hooks\";import Account from\"../Account\";import DisplayVariable from\"./DisplayVariable\";import FunctionForm from\"./FunctionForm\";var noContractDisplay=/*#__PURE__*/React.createElement(\"div\",null,\"Loading...\",\" \",/*#__PURE__*/React.createElement(\"div\",{style:{padding:32}},\"You need to run\",\" \",/*#__PURE__*/React.createElement(\"span\",{className:\"highlight\",style:{marginLeft:4,/* backgroundColor: \"#f1f1f1\", */padding:4,borderRadius:4,fontWeight:\"bolder\"}},\"yarn run chain\"),\" \",\"and\",\" \",/*#__PURE__*/React.createElement(\"span\",{className:\"highlight\",style:{marginLeft:4,/* backgroundColor: \"#f1f1f1\", */padding:4,borderRadius:4,fontWeight:\"bolder\"}},\"yarn run deploy\"),\" \",\"to see your contract here.\"),/*#__PURE__*/React.createElement(\"div\",{style:{padding:32}},/*#__PURE__*/React.createElement(\"span\",{style:{marginRight:4},role:\"img\",\"aria-label\":\"warning\"},\"\\u2622\\uFE0F\"),\"Warning: You might need to run\",/*#__PURE__*/React.createElement(\"span\",{className:\"highlight\",style:{marginLeft:4,/* backgroundColor: \"#f1f1f1\", */padding:4,borderRadius:4,fontWeight:\"bolder\"}},\"yarn run deploy\"),\" \",/*#__PURE__*/React.createElement(\"i\",null,\"again\"),\" after the frontend comes up!\"));var isQueryable=function isQueryable(fn){return(fn.stateMutability===\"view\"||fn.stateMutability===\"pure\")&&fn.inputs.length===0;};export default function Contract(_ref){var customContract=_ref.customContract,account=_ref.account,gasPrice=_ref.gasPrice,signer=_ref.signer,provider=_ref.provider,name=_ref.name,show=_ref.show,price=_ref.price,blockExplorer=_ref.blockExplorer,chainId=_ref.chainId;var contracts=useContractLoader(provider,{chainId:chainId});var contract;if(!customContract){contract=contracts?contracts[name]:\"\";}else{contract=customContract;}var address=contract?contract.address:\"\";var contractIsDeployed=useContractExistsAtAddress(provider,address);var displayedContractFunctions=useMemo(function(){return contract?Object.values(contract.interface.functions).filter(function(fn){return fn.type===\"function\"&&!(show&&show.indexOf(fn.name)<0);}):[];},[contract,show]);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),refreshRequired=_useState2[0],triggerRefresh=_useState2[1];var contractDisplay=displayedContractFunctions.map(function(fn){if(isQueryable(fn)){// If there are no inputs, just display return value\nreturn/*#__PURE__*/React.createElement(DisplayVariable,{key:fn.name,contractFunction:contract[fn.name],functionInfo:fn,refreshRequired:refreshRequired,triggerRefresh:triggerRefresh});}// If there are inputs, display a form to allow users to provide these\nreturn/*#__PURE__*/React.createElement(FunctionForm,{key:\"FF\"+fn.name,contractFunction:fn.stateMutability===\"view\"||fn.stateMutability===\"pure\"?contract[fn.name]:contract.connect(signer)[fn.name],functionInfo:fn,provider:provider,gasPrice:gasPrice,triggerRefresh:triggerRefresh});});return/*#__PURE__*/React.createElement(\"div\",{style:{margin:\"auto\",width:\"70vw\"}},/*#__PURE__*/React.createElement(Card,{title:/*#__PURE__*/React.createElement(\"div\",null,name,/*#__PURE__*/React.createElement(\"div\",{style:{float:\"right\"}},/*#__PURE__*/React.createElement(Account,{address:address,localProvider:provider,injectedProvider:provider,mainnetProvider:provider,price:price,blockExplorer:blockExplorer}),account)),size:\"large\",style:{marginTop:25,width:\"100%\"},loading:contractDisplay&&contractDisplay.length<=0},contractIsDeployed?contractDisplay:noContractDisplay));}","map":{"version":3,"sources":["C:/Users/hndls/matic-nft-tutorial/packages/react-app/src/components/Contract/index.jsx"],"names":["Card","React","useMemo","useState","useContractExistsAtAddress","useContractLoader","Account","DisplayVariable","FunctionForm","noContractDisplay","padding","marginLeft","borderRadius","fontWeight","marginRight","isQueryable","fn","stateMutability","inputs","length","Contract","customContract","account","gasPrice","signer","provider","name","show","price","blockExplorer","chainId","contracts","contract","address","contractIsDeployed","displayedContractFunctions","Object","values","interface","functions","filter","type","indexOf","refreshRequired","triggerRefresh","contractDisplay","map","connect","margin","width","float","marginTop"],"mappings":"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","sourcesContent":["import { Card } from \"antd\";\r\nimport React, { useMemo, useState } from \"react\";\r\nimport { useContractExistsAtAddress, useContractLoader } from \"../../hooks\";\r\nimport Account from \"../Account\";\r\nimport DisplayVariable from \"./DisplayVariable\";\r\nimport FunctionForm from \"./FunctionForm\";\r\n\r\nconst noContractDisplay = (\r\n  <div>\r\n    Loading...{\" \"}\r\n    <div style={{ padding: 32 }}>\r\n      You need to run{\" \"}\r\n      <span\r\n        className=\"highlight\"\r\n        style={{ marginLeft: 4, /* backgroundColor: \"#f1f1f1\", */ padding: 4, borderRadius: 4, fontWeight: \"bolder\" }}\r\n      >\r\n        yarn run chain\r\n      </span>{\" \"}\r\n      and{\" \"}\r\n      <span\r\n        className=\"highlight\"\r\n        style={{ marginLeft: 4, /* backgroundColor: \"#f1f1f1\", */ padding: 4, borderRadius: 4, fontWeight: \"bolder\" }}\r\n      >\r\n        yarn run deploy\r\n      </span>{\" \"}\r\n      to see your contract here.\r\n    </div>\r\n    <div style={{ padding: 32 }}>\r\n      <span style={{ marginRight: 4 }} role=\"img\" aria-label=\"warning\">\r\n        ☢️\r\n      </span>\r\n      Warning: You might need to run\r\n      <span\r\n        className=\"highlight\"\r\n        style={{ marginLeft: 4, /* backgroundColor: \"#f1f1f1\", */ padding: 4, borderRadius: 4, fontWeight: \"bolder\" }}\r\n      >\r\n        yarn run deploy\r\n      </span>{\" \"}\r\n      <i>again</i> after the frontend comes up!\r\n    </div>\r\n  </div>\r\n);\r\n\r\nconst isQueryable = fn => (fn.stateMutability === \"view\" || fn.stateMutability === \"pure\") && fn.inputs.length === 0;\r\n\r\nexport default function Contract({\r\n  customContract,\r\n  account,\r\n  gasPrice,\r\n  signer,\r\n  provider,\r\n  name,\r\n  show,\r\n  price,\r\n  blockExplorer,\r\n  chainId,\r\n}) {\r\n  const contracts = useContractLoader(provider, { chainId });\r\n  let contract;\r\n  if (!customContract) {\r\n    contract = contracts ? contracts[name] : \"\";\r\n  } else {\r\n    contract = customContract;\r\n  }\r\n\r\n  const address = contract ? contract.address : \"\";\r\n  const contractIsDeployed = useContractExistsAtAddress(provider, address);\r\n\r\n  const displayedContractFunctions = useMemo(\r\n    () =>\r\n      contract\r\n        ? Object.values(contract.interface.functions).filter(\r\n            fn => fn.type === \"function\" && !(show && show.indexOf(fn.name) < 0),\r\n          )\r\n        : [],\r\n    [contract, show],\r\n  );\r\n\r\n  const [refreshRequired, triggerRefresh] = useState(false);\r\n  const contractDisplay = displayedContractFunctions.map(fn => {\r\n    if (isQueryable(fn)) {\r\n      // If there are no inputs, just display return value\r\n      return (\r\n        <DisplayVariable\r\n          key={fn.name}\r\n          contractFunction={contract[fn.name]}\r\n          functionInfo={fn}\r\n          refreshRequired={refreshRequired}\r\n          triggerRefresh={triggerRefresh}\r\n        />\r\n      );\r\n    }\r\n    // If there are inputs, display a form to allow users to provide these\r\n    return (\r\n      <FunctionForm\r\n        key={\"FF\" + fn.name}\r\n        contractFunction={\r\n          fn.stateMutability === \"view\" || fn.stateMutability === \"pure\"\r\n            ? contract[fn.name]\r\n            : contract.connect(signer)[fn.name]\r\n        }\r\n        functionInfo={fn}\r\n        provider={provider}\r\n        gasPrice={gasPrice}\r\n        triggerRefresh={triggerRefresh}\r\n      />\r\n    );\r\n  });\r\n\r\n  return (\r\n    <div style={{ margin: \"auto\", width: \"70vw\" }}>\r\n      <Card\r\n        title={\r\n          <div>\r\n            {name}\r\n            <div style={{ float: \"right\" }}>\r\n              <Account\r\n                address={address}\r\n                localProvider={provider}\r\n                injectedProvider={provider}\r\n                mainnetProvider={provider}\r\n                price={price}\r\n                blockExplorer={blockExplorer}\r\n              />\r\n              {account}\r\n            </div>\r\n          </div>\r\n        }\r\n        size=\"large\"\r\n        style={{ marginTop: 25, width: \"100%\" }}\r\n        loading={contractDisplay && contractDisplay.length <= 0}\r\n      >\r\n        {contractIsDeployed ? contractDisplay : noContractDisplay}\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}
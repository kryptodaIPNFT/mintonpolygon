{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\hndls\\\\matic-nft-tutorial\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"C:\\\\Users\\\\hndls\\\\matic-nft-tutorial\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:\\\\Users\\\\hndls\\\\matic-nft-tutorial\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from\"react\";/*\r\n  ~ What it does? ~\r\n\r\n  Enables you to keep track of events\r\n\r\n  ~ How can I use? ~\r\n\r\n  const setPurposeEvents = useEventListener(readContracts, \"YourContract\", \"SetPurpose\", localProvider, 1);\r\n\r\n  ~ Features ~\r\n\r\n  - Provide readContracts by loading contracts (see more on ContractLoader.js)\r\n  - Specify the name of the contract, in this case it is \"YourContract\"\r\n  - Specify the name of the event in the contract, in this case we keep track of \"SetPurpose\" event\r\n  - Specify the provider\r\n*/export default function useEventListener(contracts,contractName,eventName,provider,startBlock,args){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),updates=_useState2[0],setUpdates=_useState2[1];useEffect(function(){if(typeof provider!==\"undefined\"&&typeof startBlock!==\"undefined\"){// if you want to read _all_ events from your contracts, set this to the block number it is deployed\nprovider.resetEventsBlock(startBlock);}if(contracts&&contractName&&contracts[contractName]){try{contracts[contractName].on(eventName,function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}var blockNumber=args[args.length-1].blockNumber;setUpdates(function(messages){return[_objectSpread({blockNumber:blockNumber},args.pop().args)].concat(_toConsumableArray(messages));});});return function(){contracts[contractName].removeListener(eventName);};}catch(e){console.log(e);}}},[provider,startBlock,contracts,contractName,eventName]);return updates;}","map":{"version":3,"sources":["C:/Users/hndls/matic-nft-tutorial/packages/react-app/src/hooks/EventListener.js"],"names":["useEffect","useState","useEventListener","contracts","contractName","eventName","provider","startBlock","args","updates","setUpdates","resetEventsBlock","on","blockNumber","length","messages","pop","removeListener","e","console","log"],"mappings":"ueAAA,OAASA,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAEA,cAAe,SAASC,CAAAA,gBAAT,CAA0BC,SAA1B,CAAqCC,YAArC,CAAmDC,SAAnD,CAA8DC,QAA9D,CAAwEC,UAAxE,CAAoFC,IAApF,CAA0F,eACzEP,QAAQ,CAAC,EAAD,CADiE,wCAChGQ,OADgG,eACvFC,UADuF,eAGvGV,SAAS,CAAC,UAAM,CACd,GAAI,MAAOM,CAAAA,QAAP,GAAoB,WAApB,EAAmC,MAAOC,CAAAA,UAAP,GAAsB,WAA7D,CAA0E,CACxE;AACAD,QAAQ,CAACK,gBAAT,CAA0BJ,UAA1B,EACD,CACD,GAAIJ,SAAS,EAAIC,YAAb,EAA6BD,SAAS,CAACC,YAAD,CAA1C,CAA0D,CACxD,GAAI,CACFD,SAAS,CAACC,YAAD,CAAT,CAAwBQ,EAAxB,CAA2BP,SAA3B,CAAsC,UAAa,+BAATG,IAAS,0CAATA,IAAS,wBACjD,GAAMK,CAAAA,WAAW,CAAGL,IAAI,CAACA,IAAI,CAACM,MAAL,CAAc,CAAf,CAAJ,CAAsBD,WAA1C,CACAH,UAAU,CAAC,SAAAK,QAAQ,wBAAOF,WAAW,CAAXA,WAAP,EAAuBL,IAAI,CAACQ,GAAL,GAAWR,IAAlC,6BAA6CO,QAA7C,IAAT,CAAV,CACD,CAHD,EAIA,MAAO,WAAM,CACXZ,SAAS,CAACC,YAAD,CAAT,CAAwBa,cAAxB,CAAuCZ,SAAvC,EACD,CAFD,CAGD,CAAC,MAAOa,CAAP,CAAU,CACVC,OAAO,CAACC,GAAR,CAAYF,CAAZ,EACD,CACF,CACF,CAlBQ,CAkBN,CAACZ,QAAD,CAAWC,UAAX,CAAuBJ,SAAvB,CAAkCC,YAAlC,CAAgDC,SAAhD,CAlBM,CAAT,CAoBA,MAAOI,CAAAA,OAAP,CACD","sourcesContent":["import { useEffect, useState } from \"react\";\r\n\r\n/*\r\n  ~ What it does? ~\r\n\r\n  Enables you to keep track of events\r\n\r\n  ~ How can I use? ~\r\n\r\n  const setPurposeEvents = useEventListener(readContracts, \"YourContract\", \"SetPurpose\", localProvider, 1);\r\n\r\n  ~ Features ~\r\n\r\n  - Provide readContracts by loading contracts (see more on ContractLoader.js)\r\n  - Specify the name of the contract, in this case it is \"YourContract\"\r\n  - Specify the name of the event in the contract, in this case we keep track of \"SetPurpose\" event\r\n  - Specify the provider\r\n*/\r\n\r\nexport default function useEventListener(contracts, contractName, eventName, provider, startBlock, args) {\r\n  const [updates, setUpdates] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (typeof provider !== \"undefined\" && typeof startBlock !== \"undefined\") {\r\n      // if you want to read _all_ events from your contracts, set this to the block number it is deployed\r\n      provider.resetEventsBlock(startBlock);\r\n    }\r\n    if (contracts && contractName && contracts[contractName]) {\r\n      try {\r\n        contracts[contractName].on(eventName, (...args) => {\r\n          const blockNumber = args[args.length - 1].blockNumber;\r\n          setUpdates(messages => [{ blockNumber, ...args.pop().args }, ...messages]);\r\n        });\r\n        return () => {\r\n          contracts[contractName].removeListener(eventName);\r\n        };\r\n      } catch (e) {\r\n        console.log(e);\r\n      }\r\n    }\r\n  }, [provider, startBlock, contracts, contractName, eventName]);\r\n\r\n  return updates;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}